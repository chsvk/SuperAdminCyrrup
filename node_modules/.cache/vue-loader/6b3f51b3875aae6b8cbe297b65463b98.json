{"remainingRequest":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\src\\views\\ViewAll.vue?vue&type=style&index=0&id=570f2172&lang=scss&scoped=true&","dependencies":[{"path":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\src\\views\\ViewAll.vue","mtime":1534831059098},{"path":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\node_modules\\sass-loader\\lib\\loader.js","mtime":1533139052000},{"path":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\Development\\Web Development\\Cyrrup\\admin-dashboard\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.viewall{\n    width: 80%;\n    margin: 0 auto;\n}\n\n.drops{\n    margin-top: 2em;\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n\n    .loading{\n        color: yellow;\n    }\n\n    .loaded{\n        color: green;\n    }\n}\n\n",{"version":3,"sources":["ViewAll.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ViewAll.vue","sourceRoot":"src\\views","sourcesContent":["<template>\r\n    <div class=\"viewall\">\r\n        <div class=\"drops\">\r\n        <div class=\"drop\">\r\n        <h3>Select Organization</h3>\r\n        <p class=\"loaded\" v-if=\"OrgLoaded\">Loaded</p>\r\n        <p class=\"loading\" v-else>Loading</p>\r\n        <select v-on:change=\"run\" name=\"Organization\" id=\"\">\r\n            <option value=\"0\">Select Organization</option>\r\n            <option v-for=\"organization in organizations\" :value=\"organization.organisation_id\">{{organization.name}}</option>\r\n        </select>\r\n        </div>\r\n        <div class=\"drop\">\r\n            <h3>Drivers</h3>\r\n            <p class=\"loaded\" v-if=\"driverLoaded\">Loaded</p>\r\n            <p class=\"loading\" v-else>Loading</p>\r\n            <select v-on:change=\"driverSelected\" name=\"Drivers\" id=\"\">\r\n                <option value=\"0\">Select Driver</option>\r\n                <option v-for=\"driver in drivers\" :value=\"driver.driver_id\">{{driver.name}}</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"drop\">\r\n            <h3>Vehicles</h3>\r\n            <p class=\"loaded\" v-if=\"vehicleLoaded\">Loaded</p>\r\n            <p class=\"loading\" v-else>Loading</p>\r\n            <select v-on:change=\"vehicleSelected\" name=\"Vehicles\" id=\"\">\r\n                <option value=\"0\">Select Vehicle</option>\r\n                <option v-for=\"vehicle in vehicles\" :value=\"vehicle.vehicle_id\">{{vehicle.vehicle_reg_number}}}</option>\r\n            </select>\r\n        </div>\r\n        </div>\r\n        <div class=\"add\">\r\n            <section>\r\n                <h3>UserId:</h3>\r\n                <input v-model=\"userid\" type=\"text\">\r\n            </section>\r\n            <section>\r\n                <h3>IMEI Number:</h3>\r\n                <input v-model=\"imei\" type=\"text\">\r\n            </section>\r\n            <section>\r\n                <h3>Mobile Number:</h3>\r\n                <input v-model=\"mobile\" type=\"text\">\r\n            </section>\r\n            <section>\r\n                <h3>Device Name:</h3>\r\n                <input v-model=\"device\" type=\"text\">\r\n            </section>\r\n        </div>\r\n        <button v-on:click=\"add\">Add Device</button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from 'firebase'\r\nimport { db } from '../main'\r\nexport default {\r\n    name: 'Viewall',\r\n    data(){\r\n        return{\r\n            userid: '',\r\n            imei: '',\r\n            mobile: '',\r\n            device: '',\r\n            organizations: [],\r\n            drivers: [],\r\n            vehicles: [],\r\n            OrgLoaded: false,\r\n            driverLoaded: false,\r\n            vehicleLoaded: false,\r\n            selectedOrg: '',\r\n            selectedDriver: '',\r\n            selectedVehicle: ''\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getOrgList();\r\n    },\r\n    methods: {\r\n        getOrgList: function(){\r\n            this.OrgLoaded = false;\r\n            var vm = this;\r\n           console.log(\"function execution started\");\r\n\t\t\t\tvar collectionRef = db.collection(\"admin_api_requests\");\r\n\t\t\t\tvar responseCollectionRef = db.collection(\"admin_response\");\r\n\t\t\t\tvar userObject = {\r\n\t\t\t\t   \t userId:\"10\"\r\n\t\t\t\t}\r\n\t\t\t\tcollectionRef.add({\r\n\t\t\t\t    api_name:\"organisation_get_list\",\r\n\t\t\t\t    request:userObject\r\n\t\t\t\t})\r\n\t\t\t\t.then((docRef)=> {\r\n\t\t\t\t    console.log(\"Request object successfully created\")\r\n\t\t\t\t    docRef.onSnapshot(doc => {\r\n                        vm.OrgLoaded = true;\r\n                        console.log('boi');\r\n                        console.log(doc.data());\r\n                        // console.log(doc.data().response.check);\r\n\t\t\t\t\tif(doc.data().response.check){\r\n                        this.organizations = doc.data().response.organisation_list;\r\n                    }\r\n\t\t\t\t    })\r\n\t\t\t\t    }).catch(err => {\r\n                        console.log('this error');\r\n\t\t\t\t    console.log(err)\r\n                })\r\n        },\r\n        run: function(e){\r\n            this.driverLoaded = false;\r\n            this.vehicleLoaded = false;\r\n            var vm = this;\r\n            if(e.target.options.selectedIndex > 0) {\r\n                var id = e.target.options[e.target.options.selectedIndex].value;\r\n                vm.selectedOrg = id;\r\n             var collectionRef = db.collection(\"admin_api_requests\");\r\n                var responseCollectionRef = db.collection(\"admin_response\");\r\n                var userObject = {\r\n                        userId:\"10\",\r\n                     organisation_id: id\r\n                }\r\n                collectionRef.add({\r\n                    api_name:\"organisation_get_vehicle_driver\",\r\n                    request:userObject\r\n                })\r\n                .then((docRef)=> {\r\n                    console.log(\"Request object successfully created\")\r\n                    docRef.onSnapshot(doc=>{\r\n                    if(doc.data().response.check){\r\n                        vm.driverLoaded = true;\r\n                        vm.vehicleLoaded = true;\r\n                        this.drivers = doc.data().response.driver_list;\r\n                        this.vehicles = doc.data().response.vehicle_list;\r\n                    }\r\n                    })\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                })\r\n        }\r\n        },\r\n        driverSelected: function(e){\r\n            var vm = this;\r\n           if(e.target.options.selectedIndex > 0) {\r\n                var id = e.target.options[e.target.options.selectedIndex].value;\r\n                vm.selectedDriver = id;\r\n           }\r\n        },\r\n        vehicleSelected: function(e){\r\n            var vm = this;\r\n            if(e.target.options.selectedIndex > 0) {\r\n                var id = e.target.options[e.target.options.selectedIndex].value;\r\n                vm.selectedVehicle = id;\r\n            }\r\n        },\r\n        add: function(){\r\n            var vm = this;\r\n            console.log(\"add new device\");\r\n\t\t\t\tvar collectionRef = db.collection(\"admin_api_requests\");\r\n\t\t\t\tvar responseCollectionRef = db.collection(\"admin_response\");\r\n\t\t\t\tvar userObject = {\r\n\t\t\t\t    userId: this.userid,\r\n\t\t\t\t    imeiNumber: this.imei,\r\n\t\t\t\t\tmobileNumber: this.mobile,\r\n\t\t\t\t\tdeviceName: this.device,\r\n\t\t\t\t\torganization_id: this.selectedOrg,\r\n\t\t\t\t\tdriver_id: this.selectedDriver,\r\n\t\t\t\t\tvehicle_id: this.selectedVehicle\r\n\t\t\t\t}\r\n\t\t\t\tcollectionRef.add({\r\n\t\t\t\t    api_name:\"device_add_new\",\r\n\t\t\t\t    request:userObject\r\n\t\t\t\t})\r\n\t\t\t\t.then((docRef)=> {\r\n\t\t\t\t    console.log(\"Request object successfully created\")\r\n\t\t\t\t    docRef.onSnapshot(doc => {\r\n                        vm.submitted = true;\r\n\t\t\t\t\tconsole.log(doc.data().response)\r\n\t\t\t\t   })\r\n\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t    console.log(err)\r\n\t\t\t\t})\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n    .viewall{\r\n        width: 80%;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .drops{\r\n        margin-top: 2em;\r\n        display: grid;\r\n        grid-template-columns: 1fr 1fr 1fr;\r\n\r\n        .loading{\r\n            color: yellow;\r\n        }\r\n\r\n        .loaded{\r\n            color: green;\r\n        }\r\n    }\r\n\r\n</style>\r\n\r\n"]}]}